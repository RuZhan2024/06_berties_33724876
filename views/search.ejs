<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Search Books</title>
  <link rel="stylesheet" href="/main.css" />
</head>
<body>
  <main class="container">
    <h1>Search Books</h1>
    <p><a href="/">← Back home</a></p>

    <form method="post" action="/books/search" class="form">
      <label>Keyword
        <input name="keyword" type="text" value="<%= (locals.keyword ?? '') %>" required />
      </label>

      <fieldset class="inline">
        <legend>Mode</legend>
        <label>
          <input type="radio" name="mode" value="partial"
                 <%= (locals.mode !== 'exact') ? 'checked' : '' %> />
          Partial (LIKE)
        </label>
        <label>
          <input type="radio" name="mode" value="exact"
                 <%= (locals.mode === 'exact') ? 'checked' : '' %> />
          Exact (=)
        </label>
      </fieldset>

      <button type="submit">Search</button>
    </form>

    <% if (locals.results) { %>
      <h2>Results</h2>
      <% if (locals.results.length === 0) { %>
        <p>No matching books.</p>
      <% } else { %>
        <table class="table">
          <thead><tr><th>Title</th><th>Price (£)</th></tr></thead>
          <tbody>
          <% locals.results.forEach(r => { %>
            <tr>
              <td><%= r.name %></td>
              <td><%= Number(r.price).toFixed(2) %></td>
            </tr>
          <% }) %>
          </tbody>
        </table>
      <% } %>
    <% } %>
  </main>
</body>
</html>
